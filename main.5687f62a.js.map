{"version":3,"sources":["scripts/main.js"],"names":["table","document","body","querySelector","thead","tbody","clickCount","addEventListener","e","target","closest","cellIndex","trBody","querySelectorAll","sort","a","b","value1","children","textContent","value2","isNaN","toNumber","localeCompare","forEach","item","append","map","classList","contains","remove","parentElement","toggle","insertAdjacentHTML","form","forms","submit","createNotification","nType","nTitle","nDescription","div","createElement","title","p","after","dataset","qa","add","innerHTML","validation","validatedForm","i","elements","length","value","trim","split","join","ch","toLowerCase","toUpperCase","convertSalary","toLocaleString","notification","preventDefault","tr","td","number","reset","slice","tableValidation","index","text","salary","input","focus","onblur","replaceWith","onkeyup","ev","key","blur"],"mappings":"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","file":"main.5687f62a.js","sourceRoot":"..\\src","sourcesContent":["'use strict';\n\nconst table = document.body.querySelector('table');\nconst thead = document.body.querySelector('thead');\nconst tbody = document.body.querySelector('tbody');\n\nlet clickCount = 0;\n\nthead.addEventListener('click', (e) => {\n  const target = e.target.closest('th');\n  const cellIndex = target.cellIndex;\n  const trBody = tbody.querySelectorAll('tr');\n\n  if (!target) {\n    return;\n  }\n\n  clickCount++;\n\n  const sortedTr = [...trBody].sort((a, b) => {\n    let value1 = a.children[cellIndex].textContent;\n    let value2 = b.children[cellIndex].textContent;\n\n    if (clickCount % 2 === 0) {\n      value1 = b.children[cellIndex].textContent;\n      value2 = a.children[cellIndex].textContent;\n    }\n\n    if (!isNaN(+value1)) {\n      return value1 - value2;\n    } else if (value1[0] === '$') {\n      return toNumber(value1) - toNumber(value2);\n    } else if (typeof value1 === 'string') {\n      return value1.localeCompare(value2);\n    }\n  });\n\n  sortedTr.forEach(item => {\n    return tbody.append(item);\n  });\n});\n\ntbody.addEventListener('click', (e) => {\n  const target = e.target.closest('td');\n  const trBody = tbody.querySelectorAll('tr');\n\n  if (!target) {\n    return;\n  }\n\n  [...trBody].map(item => {\n    if (item.classList.contains('active')) {\n      item.classList.remove('active');\n    }\n  });\n\n  target.parentElement.classList.toggle('active');\n});\n\ntable.insertAdjacentHTML('afterend',\n  `<form action=\"/\" method=\"get\" class=\"new-employee-form\">\n    <label>\n      Name:\n\n      <input \n        name=\"name\" \n        type=\"text\" \n        data-qa=\"name\" \n        required\n      >\n    </label>\n\n    <label>\n      Position: \n\n      <input \n        name=\"position\" \n        type=\"text\" \n        data-qa=\"position\" \n        required\n      >\n    </label>\n\n    <label>\n      Office:\n\n      <select \n        name=\"office\" \n        type=\"select\" \n        data-qa=\"office\" \n        required\n      >\n        <option>Tokyo</option>\n        <option>Singapore</option>\n        <option>London</option>\n        <option>New York</option>\n        <option>Edinburgh</option>\n        <option>San Francisco</option>\n      </select>\n    </label>\n\n    <label>\n      Age: \n\n      <input \n        name=\"age\" \n        type=\"number\" \n        data-qa=\"age\" \n        required\n      >\n    </label>\n\n    <label>\n      Salary: \n\n      <input \n        name=\"salary\" \n        type=\"number\" \n        data-qa=\"salary\" \n        required\n      >\n    </label>\n\n    <button>\n      Save to table\n    </button>\n  </form>`\n);\n\nconst form = document.forms[0];\nconst submit = document.body.querySelector('button');\n\nfunction createNotification(nType, nTitle, nDescription) {\n  const div = document.createElement('div');\n  const title = document.createElement('h2');\n  const p = document.createElement('p');\n\n  form.after(div);\n\n  div.dataset.qa = 'notification';\n  div.classList.add(`${nType}`, 'notification');\n\n  div.append(title);\n\n  title.classList.add('title');\n  title.innerHTML = `${nTitle}`;\n\n  title.append(p);\n\n  p.innerHTML = `${nDescription}`;\n}\n\nfunction validation(validatedForm) {\n  for (let i = 0; i < validatedForm.elements.length - 1; i++) {\n    const item = validatedForm.elements[i];\n\n    if (item.value.trim() === '') {\n      createNotification('error', 'Field error', 'The field cannot be empty');\n\n      return false;\n    }\n\n    if (item.dataset.qa === 'name') {\n      for (const ch of item.value.split(' ').join('')) {\n        if (ch.toLowerCase() === ch.toUpperCase()) {\n          createNotification('error', 'Name error',\n            'Your name must contain only letters');\n\n          return false;\n        }\n      }\n\n      if (item.value.length < 4) {\n        createNotification('error', 'Name error',\n          'Your name must not be shorter than 4 letters');\n\n        return false;\n      }\n    }\n\n    if (item.dataset.qa === 'age') {\n      if (item.value < 18 || item.value > 90) {\n        createNotification('error', 'Wrong age',\n          'Your age cannot be less than 18 and more than 90 years old');\n\n        return false;\n      }\n    }\n  }\n\n  createNotification('success', 'Successful operation',\n    'Your data has been successfully entered into the table');\n\n  return true;\n}\n\nsubmit.addEventListener('click', (e) => {\n  const notification = document.body.querySelectorAll('.notification');\n\n  [...notification].map(item => item.remove());\n  e.preventDefault();\n\n  if (validation(form)) {\n    const tr = document.createElement('tr');\n\n    tbody.append(tr);\n\n    for (let i = 0; i < form.elements.length - 1; i++) {\n      const item = form.elements[i];\n      const td = document.createElement('td');\n\n      tr.append(td);\n      td.innerHTML = item.value;\n\n      if (item.dataset.qa === 'salary') {\n        const number = +item.value;\n\n        td.innerHTML = convertSalary(number);\n      }\n    }\n    form.reset();\n  }\n});\n\nfunction convertSalary(value) {\n  return `$${value.toLocaleString('en-US')}`;\n}\n\nconst toNumber = function(value) {\n  return +value.slice(1).split(',').join('');\n};\n\ntbody.addEventListener('dblclick', (e) => {\n  const target = e.target.closest('td');\n  const text = target.textContent;\n\n  if (!target) {\n    return;\n  }\n\n  target.innerHTML = `<input type=\"text\" class=\"cell-input\">`;\n\n  const input = document.querySelector('.cell-input');\n  const cellIndex = target.cellIndex;\n\n  input.value = text;\n  input.focus();\n\n  input.onblur = function() {\n    const notification = document.body.querySelectorAll('.notification');\n\n    [...notification].map(item => item.remove());\n    target.innerHTML = tableValidation(input.value, cellIndex, text);\n    input.replaceWith(target);\n  };\n\n  input.onkeyup = function(ev) {\n    if (ev.key === 'Enter') {\n      input.blur();\n    }\n  };\n});\n\nfunction tableValidation(value, index, text) {\n  if (index === 0 || index === 1 || index === 2) {\n    for (const ch of value.split(' ').join('')) {\n      if (ch.toLowerCase() === ch.toUpperCase()) {\n        createNotification('error', 'Name error',\n          'Your name must contain only letters');\n\n        return text;\n      }\n    }\n  }\n\n  if (index === 0) {\n    if (value.length < 4) {\n      createNotification('error', 'Name error',\n        'Your name must not be shorter than 4 letters');\n\n      return text;\n    }\n  }\n\n  if (index === 3) {\n    if (value < 18 || value > 90 || isNaN(+value)) {\n      createNotification('error', 'Wrong age',\n        'Your age cannot be less than 18 and more than 90 years old');\n\n      return text;\n    }\n  }\n\n  const salary = toNumber(value);\n\n  if (index === 4 && isNaN(salary)) {\n    createNotification('error', 'Wrong number',\n      'Your salary must be a number');\n\n    return text;\n  } else if (index === 4 && !isNaN(salary)) {\n    return convertSalary(salary);\n  }\n\n  if (value.trim() === '') {\n    return text;\n  }\n\n  return value;\n}\n"]}